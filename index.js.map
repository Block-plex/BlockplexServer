{"mappings":";;;;;AAGA,MAAM,6BAAO,QAAQ,GAAG,CAAC,IAAI,IAAI;AAEjC,MAAM,+BAAS,CAAA,GAAA,WAAG,EAAE,YAAY,CAAC,CAAC,KAAK;IACrC,IAAI,SAAS,CAAC;IACd,MAAM,SAAS,CAAA,GAAA,WAAG,EAAE,YAAY,CAAC,CAAC,KAAK;QACvC,IAAI,SAAS,CAAC,KAAK;YAAE,gBAAgB;QAAY;QACjD,IAAI,GAAG,CAAC,CAAC;;;;;;;;;;;;;;;;;;6BAkBkB,EAAE,OAAO,IAAI,CAAC,+BAAS,MAAM,CAAC;;;EAGzD,CAAC;IACH;AACA;AAEA,MAAM,4BAAM,IAAI,CAAA,GAAA,sBAAc,EAAE;YAAE;AAAO;AAEzC,IAAI,gCAAU,CAAC;AAEf,0BAAI,EAAE,CAAC,cAAc,CAAC;IACpB,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC;IAC5C,6BAAO,CAAC,GAAG,GAAG;QAAE,GAAG;QAAG,GAAG;QAAG,GAAG;QAAG,KAAK;IAAE;IAEzC,4BAA4B;IAC5B,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC;QAAE,MAAM;YAAM;IAAG;IAE5C,OAAO,EAAE,CAAC,WAAW,CAAC;QACpB,IAAI;YACF,MAAM,OAAO,KAAK,KAAK,CAAC;YAExB,sCAAsC;YACtC,IAAI,KAAK,IAAI,KAAK,UAChB,6BAAO,CAAC,GAAG,GAAG,KAAK,KAAK;YAG1B,QAAQ,GAAG,CAAC,yBAAyB,IAAI,KAAK;QAChD,EAAE,OAAM,CAAC;IACX;IAEA,OAAO,EAAE,CAAC,SAAS;QACjB,OAAO,6BAAO,CAAC,GAAG;IACpB;AACF;AAEA,mDAAmD;AACnD,YAAY;IACV,MAAM,WAAW,KAAK,SAAS,CAAC;IAChC,0BAAI,OAAO,CAAC,OAAO,CAAC,CAAC,SAAW,OAAO,IAAI,CAAC;AAC9C,GAAG;AAEH,6BAAO,MAAM,CAAC,4BAAM;IAClB,QAAQ,GAAG,CAAC,qBAAqB;AACnC","sources":["server.js"],"sourcesContent":["import http from \"http\";\r\nimport { WebSocketServer } from \"ws\";\r\n\r\nconst PORT = process.env.PORT || 3000;\r\n\r\nconst server = http.createServer((req, res) => {\r\n  res.writeHead(200);\r\n  const server = http.createServer((req, res) => {\r\n  res.writeHead(200, { \"Content-Type\": \"text/html\" });\r\n  res.end(`\r\n    <html>\r\n      <head>\r\n        <title>Blockplex Server</title>\r\n        <style>\r\n          body {\r\n            background: #111;\r\n            color: #0f0;\r\n            font-family: monospace;\r\n            text-align: center;\r\n            padding-top: 100px;\r\n          }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h1>Blockplex Multiplayer Server</h1>\r\n        <p>Status: Online</p>\r\n          <h1>Blockplex Server</h1>\r\n          <p>Players online: ${Object.keys(players).length}</p>\r\n      </body>\r\n    </html>\r\n  `);\r\n});\r\n});\r\n\r\nconst wss = new WebSocketServer({ server });\r\n\r\nlet players = {};\r\n\r\nwss.on(\"connection\", (socket) => {\r\n  const id = Math.random().toString(36).slice(2);\r\n  players[id] = { x: 0, y: 0, z: 0, rot: 0 };\r\n\r\n  // Send the ID to the client\r\n  socket.send(JSON.stringify({ type: \"id\", id }));\r\n\r\n  socket.on(\"message\", (msg) => {\r\n    try {\r\n      const data = JSON.parse(msg);\r\n\r\n      // Only update if it's a player update\r\n      if (data.type === \"update\") {\r\n        players[id] = data.state;\r\n      }\r\n\r\n      console.log(\"Received message from\", id, \":\", data);\r\n    } catch {}\r\n  });\r\n\r\n  socket.on(\"close\", () => {\r\n    delete players[id];\r\n  });\r\n});\r\n\r\n// Send all players to everyone 30 times per second\r\nsetInterval(() => {\r\n  const snapshot = JSON.stringify(players);\r\n  wss.clients.forEach((client) => client.send(snapshot));\r\n}, 33);\r\n\r\nserver.listen(PORT, () => {\r\n  console.log(\"Listening on port\", PORT);\r\n});\r\n"],"names":[],"version":3,"file":"index.js.map"}